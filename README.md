# è™šæ‹Ÿäº¤æ˜“å¹³å°

ä¸€ä¸ªç”¨äºæ¨¡æ‹Ÿäº¤æ˜“çš„è™šæ‹Ÿå¹³å°ï¼Œæ”¯æŒå¤šç§äº¤æ˜“ç±»å‹å’Œç¤¾äº¤åŠŸèƒ½ã€‚

## ç‰ˆæœ¬ä¿¡æ¯

- å½“å‰ç‰ˆæœ¬: v1.0.0
- å‘å¸ƒçŠ¶æ€: æ­£å¼ç‰ˆ
- å‘å¸ƒæ—¥æœŸ: 2025å¹´10æœˆ21æ—¥

## åŠŸèƒ½ç‰¹æ€§

- å¤šç§äº¤æ˜“å¼•æ“ï¼ˆåˆçº¦äº¤æ˜“ã€äºŒå…ƒæœŸæƒã€ç§å‹ŸåŸºé‡‘ï¼‰
- ç¤¾äº¤åŠŸèƒ½ï¼ˆå…³æ³¨ã€äº¤æ˜“åˆ†äº«ã€ç‚¹èµã€è¯„è®ºï¼‰
- é£é™©ç®¡ç†
- å¸‚åœºæ¨¡æ‹Ÿ
- æ•°æ®åˆ†æ
- å·¥ä½œæµç³»ç»Ÿ
- å“åº”å¼Webå‰ç«¯ï¼ˆåŸºäºReact + Vite + Tailwind CSSï¼‰
- ç§»åŠ¨ç«¯ä¼˜åŒ–ç•Œé¢
- å®æ—¶å¸‚åœºæ•°æ®æ›´æ–°
- ç³»ç»Ÿç›‘æ§å’Œæ€§èƒ½åˆ†æ

## é¡¹ç›®ç»“æ„

```
project-root/
â”œâ”€â”€ apps/                        # å¤šæœåŠ¡å…¥å£
â”‚   â”œâ”€â”€ fund-server/            # ç§å‹ŸåŸºé‡‘æœåŠ¡
â”‚   â”œâ”€â”€ contract-market/        # åˆçº¦äº¤æ˜“æœåŠ¡
â”‚   â”œâ”€â”€ option-market/          # æœŸæƒäº¤æ˜“æœåŠ¡
â”‚   â””â”€â”€ cron-jobs/              # å®šæ—¶ä»»åŠ¡æœåŠ¡
â”‚       â”œâ”€â”€ updateFundNetValue.js
â”‚       â”œâ”€â”€ contractMarketUpdater.js
â”‚       â””â”€â”€ optionMarketUpdater.js
â”œâ”€â”€ packages/                   # å¯å¤ç”¨æ¨¡å—
â”‚   â”œâ”€â”€ db-adapter/             # Teable Proxy å°è£…
â”‚   â”œâ”€â”€ api-client/             # Axios å°è£…
â”‚   â”œâ”€â”€ chart-kit/              # å›¾è¡¨ç»„ä»¶å°è£…
â”‚   â””â”€â”€ ui-components/          # é€šç”¨ UI ç»„ä»¶åº“
â”œâ”€â”€ web/                        # å“åº”å¼ Web å‰ç«¯ (React + Vite)
â”‚   â”œâ”€â”€ src/                    # æºä»£ç 
â”‚   â”‚   â”œâ”€â”€ components/         # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/              # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ router/             # è·¯ç”±é…ç½®
â”‚   â”‚   â”œâ”€â”€ App.tsx             # æ ¹ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.tsx            # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ index.html              # HTML æ¨¡æ¿
â”‚   â”œâ”€â”€ package.json            # å‰ç«¯ä¾èµ–é…ç½®
â”‚   â”œâ”€â”€ vite.config.ts          # Vite é…ç½®
â”‚   â”œâ”€â”€ tailwind.config.js      # Tailwind CSS é…ç½®
â”‚   â””â”€â”€ postcss.config.js       # PostCSS é…ç½®
â”œâ”€â”€ mobile/                     # ç§»åŠ¨ç«¯é¡µé¢ï¼ˆå·²å®Œæˆï¼‰
â”‚   â”œâ”€â”€ funds.html
â”‚   â”œâ”€â”€ contract-market.html
â”‚   â””â”€â”€ option-market.html
â”œâ”€â”€ public/                     # é™æ€èµ„æº
â”œâ”€â”€ scripts/                    # æ„å»º/éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ config/                     # é…ç½®æ–‡ä»¶
â”œâ”€â”€ data/                       # æ•°æ®æ–‡ä»¶
â”œâ”€â”€ k8s/                        # Kubernetes é…ç½®
â”œâ”€â”€ src/                        # æºä»£ç 
â”‚   â”œâ”€â”€ controllers/            # æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ database/               # æ•°æ®åº“é€‚é…å™¨
â”‚   â”œâ”€â”€ engine/                 # äº¤æ˜“å¼•æ“
â”‚   â”œâ”€â”€ middleware/             # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ models/                 # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ modules/                # åŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ routes/                 # è·¯ç”±
â”‚   â”œâ”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ app.js                 # Express åº”ç”¨
â”œâ”€â”€ tests/                      # æµ‹è¯•æ–‡ä»¶
â””â”€â”€ templates/                  # æ¨¡æ¿æ–‡ä»¶
```

## æ¨¡å—èŒè´£è¯´æ˜

### apps/ - å¤šæœåŠ¡å…¥å£
- **fund-server/**: ç§å‹ŸåŸºé‡‘æœåŠ¡ï¼Œæä¾›åŸºé‡‘ç›¸å…³çš„APIå’Œé¡µé¢
- **contract-market/**: åˆçº¦äº¤æ˜“æœåŠ¡ï¼Œæä¾›åˆçº¦è¡Œæƒ…ç›¸å…³çš„APIå’Œé¡µé¢
- **option-market/**: æœŸæƒäº¤æ˜“æœåŠ¡ï¼Œæä¾›æœŸæƒè¡Œæƒ…ç›¸å…³çš„APIå’Œé¡µé¢
- **cron-jobs/**: å®šæ—¶ä»»åŠ¡æœåŠ¡ï¼ŒåŒ…å«æ‰€æœ‰å®šæ—¶æ›´æ–°ä»»åŠ¡

### packages/ - å¯å¤ç”¨æ¨¡å—
- **db-adapter/**: Teableæ•°æ®åº“è¿æ¥å’ŒæŸ¥è¯¢å°è£…
- **api-client/**: Axios HTTPå®¢æˆ·ç«¯å°è£…ï¼Œç»Ÿä¸€å¤„ç†è¯·æ±‚å’Œå“åº”
- **chart-kit/**: å›¾è¡¨ç»„ä»¶å°è£…ï¼ŒåŸºäºEChartsæä¾›ç»Ÿä¸€çš„å›¾è¡¨æ¥å£
- **ui-components/**: é€šç”¨UIç»„ä»¶åº“ï¼Œæä¾›å¯å¤ç”¨çš„ç•Œé¢ç»„ä»¶

### web/ - å“åº”å¼ Web å‰ç«¯
- **src/components/**: å¯å¤ç”¨çš„Reactç»„ä»¶
- **src/pages/**: é¡µé¢çº§Reactç»„ä»¶
- **src/router/**: React Routerè·¯ç”±é…ç½®
- **src/App.tsx**: æ ¹ç»„ä»¶
- **src/main.tsx**: åº”ç”¨å…¥å£æ–‡ä»¶
- **index.html**: HTMLæ¨¡æ¿æ–‡ä»¶
- **package.json**: å‰ç«¯ä¾èµ–é…ç½®ï¼ŒåŒ…å«Reactã€Viteã€Tailwind CSSç­‰
- **vite.config.ts**: Viteæ„å»ºå·¥å…·é…ç½®
- **tailwind.config.js**: Tailwind CSSé…ç½®
- **postcss.config.js**: PostCSSé…ç½®

### mobile/ - ç§»åŠ¨ç«¯é¡µé¢
- ä¿ç•™åŸæœ‰çš„ç§»åŠ¨ç«¯HTMLé¡µé¢ï¼Œé€æ­¥è¿ç§»ä¸ºç»„ä»¶åŒ–ç»“æ„

## å¿«é€Ÿå¼€å§‹

### æœ¬åœ°è¿è¡Œ

```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨æœåŠ¡
npm start
```

æœåŠ¡å°†åœ¨ http://localhost:3001 ä¸Šè¿è¡Œã€‚

### ä½¿ç”¨ PM2 ç®¡ç†æœåŠ¡

é¡¹ç›®åŒ…å« PM2 é…ç½®æ–‡ä»¶ `ecosystem.config.js`ï¼Œç”¨äºç»Ÿä¸€ç®¡ç†ä¸»æœåŠ¡å’Œå®šæ—¶ä»»åŠ¡ã€‚

```bash
# å®‰è£… PM2
npm install pm2 -g

# å¯åŠ¨æ‰€æœ‰æœåŠ¡
pm2 start ecosystem.config.js

# ä¿å­˜é…ç½®ï¼ˆå¼€æœºè‡ªå¯ï¼‰
pm2 save

# è®¾ç½®å¼€æœºè‡ªå¯ï¼ˆæŒ‰æç¤ºæ‰§è¡Œç”Ÿæˆçš„å‘½ä»¤ï¼‰
pm2 startup
```

#### PM2 é…ç½®è¯´æ˜

PM2 é…ç½®åŒ…å«ä»¥ä¸‹åº”ç”¨ï¼š

1. `fund-server` - åŸºé‡‘æœåŠ¡ï¼Œæä¾›åŸºé‡‘Webç•Œé¢å’ŒAPIæ¥å£ (ç«¯å£: 3001)
2. `contract-market` - åˆçº¦è¡Œæƒ…æœåŠ¡ (ç«¯å£: 3002)
3. `option-market` - æœŸæƒè¡Œæƒ…æœåŠ¡ (ç«¯å£: 3003)
4. `fund-cron` - åŸºé‡‘å‡€å€¼æ›´æ–°å®šæ—¶ä»»åŠ¡
5. `contract-cron` - åˆçº¦å¸‚åœºæ•°æ®æ›´æ–°å®šæ—¶ä»»åŠ¡
6. `option-cron` - æœŸæƒå¸‚åœºæ•°æ®æ›´æ–°å®šæ—¶ä»»åŠ¡
7. `performance-alert-checker` - æ€§èƒ½è­¦æŠ¥æ£€æŸ¥å®šæ—¶ä»»åŠ¡

æ‰€æœ‰æœåŠ¡éƒ½ä¼šè‡ªåŠ¨é‡å¯å¹¶åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨è¿è¡Œã€‚

#### PM2 å¸¸ç”¨å‘½ä»¤

```bash
pm2 list                           # æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹çŠ¶æ€
pm2 logs                           # æŸ¥çœ‹æ‰€æœ‰åº”ç”¨æ—¥å¿—
pm2 logs fund-server              # æŸ¥çœ‹åŸºé‡‘æœåŠ¡æ—¥å¿—
pm2 logs fund-cron                # æŸ¥çœ‹åŸºé‡‘å®šæ—¶ä»»åŠ¡æ—¥å¿—
pm2 logs contract-market          # æŸ¥çœ‹åˆçº¦è¡Œæƒ…æœåŠ¡æ—¥å¿—
pm2 logs option-market            # æŸ¥çœ‹æœŸæƒè¡Œæƒ…æœåŠ¡æ—¥å¿—
pm2 restart fund-server           # é‡å¯åŸºé‡‘æœåŠ¡
pm2 stop contract-market          # åœæ­¢åˆçº¦è¡Œæƒ…æœåŠ¡
pm2 delete option-market          # åˆ é™¤æœŸæƒè¡Œæƒ…æœåŠ¡
pm2 monit                         # å®æ—¶ç›‘æ§èµ„æºå ç”¨
```

### å¼€å‘æ¨¡å¼

```bash
# åç«¯å¼€å‘æ¨¡å¼
npm run dev

# å‰ç«¯å¼€å‘æ¨¡å¼
cd web && npm run dev
```

## ğŸš€ å¿«é€Ÿå¯åŠ¨æŒ‡å—

### æ¨èå¯åŠ¨æ–¹å¼ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

```bash
# ä½¿ç”¨PM2å¯åŠ¨æ‰€æœ‰æœåŠ¡
npm run pm2-start

# æˆ–ä½¿ç”¨å¯åŠ¨è„šæœ¬
./start.bat
```

### å¼€å‘æ¨¡å¼

```bash
# åç«¯å¼€å‘æ¨¡å¼
npm run dev

# å‰ç«¯å¼€å‘æ¨¡å¼
cd web && npm run dev
```

### Qoder ç³»ç»Ÿæ€»æ§

æ”¯æŒçš„å‘½ä»¤ï¼š
- "å¯åŠ¨ç³»ç»Ÿ" - ä½¿ç”¨ PM2 å¯åŠ¨æ‰€æœ‰æœåŠ¡
- "åœæ­¢ç³»ç»Ÿ" - åœæ­¢æ‰€æœ‰æœåŠ¡
- "é‡å¯ç³»ç»Ÿ" - é‡å¯æ‰€æœ‰æœåŠ¡
- "æŸ¥çœ‹çŠ¶æ€" - æŸ¥çœ‹æœåŠ¡çŠ¶æ€
- "å¼€å‘æ¨¡å¼å¯åŠ¨" - å¯åŠ¨å¼€å‘æ¨¡å¼

```bash
npm run qoder "å¯åŠ¨ç³»ç»Ÿ"
```

### æœåŠ¡è®¿é—®åœ°å€

- åŸºé‡‘æœåŠ¡: http://localhost:3001
- åˆçº¦äº¤æ˜“: http://localhost:3002
- æœŸæƒäº¤æ˜“: http://localhost:3003
- ç³»ç»Ÿç®¡ç†é¢æ¿: http://localhost:3001/admin/panel
- ç”¨æˆ·ä»ªè¡¨æ¿: http://localhost:3001/client/dashboard

## ç³»ç»Ÿæ€»æ§é¢æ¿

é¡¹ç›®æä¾›äº† Qoder ç³»ç»Ÿæ€»æ§é¢æ¿ï¼Œå¯ä»¥é€šè¿‡ç®€å•çš„ä¸­æ–‡æŒ‡ä»¤æ‰§è¡Œå¤æ‚çš„ç³»ç»Ÿä»»åŠ¡ï¼š

```bash
# æ‰§è¡Œç³»ç»Ÿæ€»æ§ä»»åŠ¡ï¼ˆæ„å»ºã€éƒ¨ç½²ã€åŒæ­¥ç­‰ï¼‰
npm run qoder "æ‰§è¡Œç³»ç»Ÿæ€»æ§ä»»åŠ¡"

# æ£€æŸ¥æ‰€æœ‰æ¨¡å—çŠ¶æ€
npm run qoder "æ£€æŸ¥æ‰€æœ‰æ¨¡å—çŠ¶æ€"

# åŒæ­¥æ•°æ®åº“å¹¶æ›´æ–°æ–‡æ¡£
npm run qoder "åŒæ­¥æ•°æ®åº“å¹¶æ›´æ–°æ–‡æ¡£"
```

## éƒ¨ç½²

### Docker éƒ¨ç½²

é¡¹ç›®æ”¯æŒ Docker éƒ¨ç½²ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ„å»ºå’Œè¿è¡Œï¼š

```bash
# æ„å»ºé•œåƒ
docker build -t virtual-trading-platform .

# è¿è¡Œå®¹å™¨
docker run -p 3000:3000 virtual-trading-platform
```

### Kubernetes éƒ¨ç½²

é¡¹ç›®åŒ…å«å®Œæ•´çš„ Kubernetes é…ç½®æ–‡ä»¶ï¼Œä½äº [k8s](k8s/) ç›®å½•ä¸­ã€‚

### Nginx åå‘ä»£ç†é…ç½®

é¡¹ç›®åŒ…å« Nginx é…ç½®æ–‡ä»¶ï¼Œæ”¯æŒå¤šæœåŠ¡åå‘ä»£ç†ï¼š

```nginx
# åŸºé‡‘æœåŠ¡ä»£ç†
location / {
    proxy_pass http://localhost:5173;  # å‰ç«¯åº”ç”¨
}

# APIæœåŠ¡ä»£ç†
location /api/ {
    proxy_pass http://localhost:3001/;
}
```

### Nginx HTTPS é…ç½®

é¡¹ç›®æ”¯æŒé€šè¿‡ Nginx é…ç½® HTTPSï¼ŒåŒ…å«ä»¥ä¸‹ç‰¹æ€§ï¼š

1. HTTP è‡ªåŠ¨é‡å®šå‘åˆ° HTTPS
2. SSL è¯ä¹¦é…ç½®æ”¯æŒ
3. å¤šåŸŸåæ”¯æŒ (jcstjj.top å’Œ www.jcstjj.top)

ç›¸å…³é…ç½®æ–‡ä»¶ï¼š
- `nginx/jcstjj.top.conf` - åŸŸåé…ç½®æ–‡ä»¶
- `scripts/nginx-deploy-and-start.bat` - Nginx éƒ¨ç½²å’Œå¯åŠ¨è„šæœ¬
- `scripts/one-click-deploy.bat` - ä¸€é”®éƒ¨ç½²è„šæœ¬ (åŒ…æ‹¬ SSL è¯ä¹¦ç”³è¯·)
- `scripts/nginx-config-check-reload.bat` - é…ç½®æ£€æŸ¥å’Œé‡è½½è„šæœ¬

### è‡ªåŠ¨åŒ–éƒ¨ç½²

é¡¹ç›®åŒ…å«è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ï¼š

```bash
# Linux/Mac
./scripts/deploy.sh

# Windows
scripts\deploy.bat
```

## æ–‡æ¡£

- [ç‰ˆæœ¬å˜æ›´æ—¥å¿—](CHANGELOG.md)
- [éƒ¨ç½²æŒ‡å—](docs/deployment/DEPLOYMENT-GUIDE.md)
- [API æ–‡æ¡£](docs/api/API.md)
- [ç”¨æˆ·ä½¿ç”¨æŒ‡å—](docs/guides/USER_GUIDE.md)
- [v1.0 ç‰ˆæœ¬å‘å¸ƒè¯´æ˜](docs/RELEASE_v1.0.md)

## è®¸å¯è¯

MIT