<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>性能监控仪表板 - 聚财众发</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        :root {
            --primary: #000;
            --secondary: #00ffaa;
            --success: #00ff00;
            --warning: #ffaa00;
            --danger: #ff0000;
            --light: #333;
            --dark: #fff;
            --bg-color: #000;
            --card-bg: #111;
            --border-radius: 16px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Courier New', monospace;
        }
        
        body {
            background-color: var(--bg-color);
            color: var(--dark);
            font-size: 15px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: var(--primary);
            color: white;
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.5);
            border: 1px solid #333;
        }
        
        .header h1 {
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .refresh-btn {
            background: var(--secondary);
            color: #000;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .refresh-btn:hover {
            background: #00e699;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .metric-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.5);
            border: 1px solid #333;
        }
        
        .metric-card h3 {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: var(--secondary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .metric-value {
            font-size: 2rem;
            font-weight: 600;
            text-align: center;
            margin: 20px 0;
        }
        
        .metric-trend {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
        }
        
        .trend-up {
            color: var(--danger);
        }
        
        .trend-down {
            color: var(--success);
        }
        
        .chart-container {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.5);
            border: 1px solid #333;
            margin-bottom: 20px;
            height: 400px;
        }
        
        .chart-container h3 {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: var(--secondary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .chart-wrapper {
            height: calc(100% - 30px);
        }
        
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .tab {
            background: var(--card-bg);
            border: 1px solid #333;
            color: #aaa;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-weight: 600;
        }
        
        .tab.active {
            background: var(--secondary);
            color: #000;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: var(--card-bg);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.5);
            border: 1px solid #333;
        }
        
        .data-table th {
            background: var(--primary);
            padding: 12px 15px;
            text-align: left;
            font-weight: 600;
        }
        
        .data-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #333;
        }
        
        .data-table tr:last-child td {
            border-bottom: none;
        }
        
        .data-table tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }
        
        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-ok {
            background: var(--success);
        }
        
        .status-warning {
            background: var(--warning);
        }
        
        .status-error {
            background: var(--danger);
        }
        
        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .header {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-chart-line"></i> 性能监控仪表板</h1>
            <button class="refresh-btn" id="refreshBtn">
                <i class="fas fa-sync-alt"></i> 刷新数据
            </button>
        </div>
        
        <div class="tabs">
            <div class="tab active" data-tab="overview">概览</div>
            <div class="tab" data-tab="api">API性能</div>
            <div class="tab" data-tab="database">数据库性能</div>
            <div class="tab" data-tab="frontend">前端性能</div>
        </div>
        
        <div class="tab-content active" id="overview-tab">
            <div class="dashboard-grid">
                <div class="metric-card">
                    <h3><i class="fas fa-tachometer-alt"></i> 平均响应时间</h3>
                    <div class="metric-value">128<span style="font-size: 1rem;">ms</span></div>
                    <div class="metric-trend trend-down">
                        <i class="fas fa-arrow-down"></i>
                        <span>5.2% (较昨日)</span>
                    </div>
                </div>
                
                <div class="metric-card">
                    <h3><i class="fas fa-database"></i> 数据库查询时间</h3>
                    <div class="metric-value">42<span style="font-size: 1rem;">ms</span></div>
                    <div class="metric-trend trend-down">
                        <i class="fas fa-arrow-down"></i>
                        <span>3.1% (较昨日)</span>
                    </div>
                </div>
                
                <div class="metric-card">
                    <h3><i class="fas fa-globe"></i> 页面加载时间</h3>
                    <div class="metric-value">856<span style="font-size: 1rem;">ms</span></div>
                    <div class="metric-trend trend-up">
                        <i class="fas fa-arrow-up"></i>
                        <span>2.4% (较昨日)</span>
                    </div>
                </div>
                
                <div class="metric-card">
                    <h3><i class="fas fa-exclamation-triangle"></i> 错误率</h3>
                    <div class="metric-value">0.2<span style="font-size: 1rem;">%</span></div>
                    <div class="metric-trend trend-down">
                        <i class="fas fa-arrow-down"></i>
                        <span>0.1% (较昨日)</span>
                    </div>
                </div>
            </div>
            
            <div class="chart-container">
                <h3><i class="fas fa-chart-bar"></i> 系统性能趋势</h3>
                <div class="chart-wrapper" id="performanceChart"></div>
            </div>
        </div>
        
        <div class="tab-content" id="api-tab">
            <div class="chart-container">
                <h3><i class="fas fa-exchange-alt"></i> API响应时间</h3>
                <div class="chart-wrapper" id="apiChart"></div>
            </div>
            
            <table class="data-table">
                <thead>
                    <tr>
                        <th>API端点</th>
                        <th>平均响应时间</th>
                        <th>请求量</th>
                        <th>错误率</th>
                        <th>状态</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>/api/users/login</td>
                        <td>45ms</td>
                        <td>1,245</td>
                        <td>0.0%</td>
                        <td><span class="status-indicator status-ok"></span>正常</td>
                    </tr>
                    <tr>
                        <td>/api/trade/buy</td>
                        <td>128ms</td>
                        <td>876</td>
                        <td>0.1%</td>
                        <td><span class="status-indicator status-ok"></span>正常</td>
                    </tr>
                    <tr>
                        <td>/api/market/data</td>
                        <td>256ms</td>
                        <td>2,341</td>
                        <td>0.3%</td>
                        <td><span class="status-indicator status-warning"></span>警告</td>
                    </tr>
                    <tr>
                        <td>/api/fund/history</td>
                        <td>89ms</td>
                        <td>567</td>
                        <td>0.0%</td>
                        <td><span class="status-indicator status-ok"></span>正常</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div class="tab-content" id="database-tab">
            <div class="chart-container">
                <h3><i class="fas fa-database"></i> 数据库查询性能</h3>
                <div class="chart-wrapper" id="dbChart"></div>
            </div>
            
            <table class="data-table">
                <thead>
                    <tr>
                        <th>查询类型</th>
                        <th>平均执行时间</th>
                        <th>查询次数</th>
                        <th>慢查询</th>
                        <th>状态</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>用户信息查询</td>
                        <td>25ms</td>
                        <td>1,876</td>
                        <td>0</td>
                        <td><span class="status-indicator status-ok"></span>正常</td>
                    </tr>
                    <tr>
                        <td>交易记录查询</td>
                        <td>42ms</td>
                        <td>2,341</td>
                        <td>2</td>
                        <td><span class="status-indicator status-warning"></span>警告</td>
                    </tr>
                    <tr>
                        <td>行情数据查询</td>
                        <td>68ms</td>
                        <td>5,672</td>
                        <td>5</td>
                        <td><span class="status-indicator status-warning"></span>警告</td>
                    </tr>
                    <tr>
                        <td>基金净值更新</td>
                        <td>156ms</td>
                        <td>144</td>
                        <td>0</td>
                        <td><span class="status-indicator status-ok"></span>正常</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div class="tab-content" id="frontend-tab">
            <div class="chart-container">
                <h3><i class="fas fa-window-maximize"></i> 前端页面性能</h3>
                <div class="chart-wrapper" id="frontendChart"></div>
            </div>
            
            <table class="data-table">
                <thead>
                    <tr>
                        <th>页面</th>
                        <th>平均加载时间</th>
                        <th>访问量</th>
                        <th>FCP</th>
                        <th>状态</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>首页</td>
                        <td>756ms</td>
                        <td>3,456</td>
                        <td>1.2s</td>
                        <td><span class="status-indicator status-ok"></span>正常</td>
                    </tr>
                    <tr>
                        <td>行情页</td>
                        <td>892ms</td>
                        <td>2,123</td>
                        <td>1.5s</td>
                        <td><span class="status-indicator status-warning"></span>警告</td>
                    </tr>
                    <tr>
                        <td>交易页</td>
                        <td>654ms</td>
                        <td>1,876</td>
                        <td>1.1s</td>
                        <td><span class="status-indicator status-ok"></span>正常</td>
                    </tr>
                    <tr>
                        <td>个人中心</td>
                        <td>923ms</td>
                        <td>1,234</td>
                        <td>1.8s</td>
                        <td><span class="status-indicator status-warning"></span>警告</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // 初始化图表
        function initCharts() {
            // 系统性能趋势图
            const performanceChart = echarts.init(document.getElementById('performanceChart'));
            const performanceOption = {
                tooltip: {
                    trigger: 'axis'
                },
                legend: {
                    data: ['API响应时间', '数据库查询时间', '页面加载时间']
                },
                xAxis: {
                    type: 'category',
                    data: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00', '24:00']
                },
                yAxis: {
                    type: 'value',
                    name: '时间(ms)'
                },
                series: [
                    {
                        name: 'API响应时间',
                        type: 'line',
                        data: [120, 135, 128, 142, 138, 130, 125],
                        smooth: true
                    },
                    {
                        name: '数据库查询时间',
                        type: 'line',
                        data: [45, 42, 48, 52, 49, 44, 41],
                        smooth: true
                    },
                    {
                        name: '页面加载时间',
                        type: 'line',
                        data: [820, 850, 875, 890, 865, 840, 825],
                        smooth: true
                    }
                ]
            };
            performanceChart.setOption(performanceOption);
            
            // API响应时间图
            const apiChart = echarts.init(document.getElementById('apiChart'));
            const apiOption = {
                tooltip: {
                    trigger: 'axis'
                },
                xAxis: {
                    type: 'category',
                    data: ['登录', '买入', '行情', '基金', '交易', '用户']
                },
                yAxis: {
                    type: 'value',
                    name: '响应时间(ms)'
                },
                series: [{
                    data: [45, 128, 256, 89, 165, 78],
                    type: 'bar',
                    itemStyle: {
                        color: '#00ffaa'
                    }
                }]
            };
            apiChart.setOption(apiOption);
            
            // 数据库查询性能图
            const dbChart = echarts.init(document.getElementById('dbChart'));
            const dbOption = {
                tooltip: {
                    trigger: 'axis'
                },
                xAxis: {
                    type: 'category',
                    data: ['用户查询', '交易记录', '行情数据', '基金更新']
                },
                yAxis: {
                    type: 'value',
                    name: '查询时间(ms)'
                },
                series: [{
                    data: [25, 42, 68, 156],
                    type: 'bar',
                    itemStyle: {
                        color: '#00aaff'
                    }
                }]
            };
            dbChart.setOption(dbOption);
            
            // 前端页面性能图
            const frontendChart = echarts.init(document.getElementById('frontendChart'));
            const frontendOption = {
                tooltip: {
                    trigger: 'axis'
                },
                legend: {
                    data: ['加载时间', 'FCP']
                },
                xAxis: {
                    type: 'category',
                    data: ['首页', '行情页', '交易页', '个人中心']
                },
                yAxis: {
                    type: 'value',
                    name: '时间(ms)'
                },
                series: [
                    {
                        name: '加载时间',
                        type: 'bar',
                        data: [756, 892, 654, 923],
                        itemStyle: {
                            color: '#ffaa00'
                        }
                    },
                    {
                        name: 'FCP',
                        type: 'bar',
                        data: [1200, 1500, 1100, 1800],
                        itemStyle: {
                            color: '#ff00aa'
                        }
                    }
                ]
            };
            frontendChart.setOption(frontendOption);
            
            // 窗口大小改变时重置图表大小
            window.addEventListener('resize', function() {
                performanceChart.resize();
                apiChart.resize();
                dbChart.resize();
                frontendChart.resize();
            });
        }
        
        // 初始化标签页功能
        function initTabs() {
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // 移除所有活动状态
                    tabs.forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    // 添加当前活动状态
                    this.classList.add('active');
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                });
            });
        }
        
        // 初始化刷新按钮
        function initRefresh() {
            const refreshBtn = document.getElementById('refreshBtn');
            refreshBtn.addEventListener('click', function() {
                const icon = this.querySelector('i');
                icon.classList.add('fa-spin');
                
                // 模拟刷新数据
                setTimeout(() => {
                    icon.classList.remove('fa-spin');
                    alert('数据已刷新');
                }, 1000);
            });
        }
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            initCharts();
            initTabs();
            initRefresh();
        });
    </script>
</body>
</html>